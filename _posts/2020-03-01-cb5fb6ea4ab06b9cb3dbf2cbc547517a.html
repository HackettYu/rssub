---
layout:      post
title:       LeetCode Weekly Contest 178 (1365~1368)
link:        https://programcz.github.io/2020/03/01/LeetCode-Weekly-Contest-178-(1365-1368).html
date:        2020-03-01 10:24:00
category:    个人博客
source:      ProgramCZ's Blog
description: LeetCode周赛专题每周日更新，点击标签CAT - LeetCode Weekly Contest查看更多。 本次比赛通过3题，时间为1 02 27，排名为1200+/9200+。  1365. How Many Numbers Are Smaller Than the Current Numb
---

<p>LeetCode周赛专题每周日更新，点击标签<code class="language-plaintext highlighter-rouge">CAT - LeetCode Weekly Contest</code>查看更多。</p>

<p>本次比赛通过<code class="language-plaintext highlighter-rouge">3</code>题，时间为<code class="language-plaintext highlighter-rouge">1:02:27</code>，排名为<code class="language-plaintext highlighter-rouge">1200+/9200+</code>。</p>

<!--more-->

<h2 id="1365-how-many-numbers-are-smaller-than-the-current-number-easy">1365. How Many Numbers Are Smaller Than the Current Number #Easy</h2>

<h3 id="题目描述">题目描述</h3>

<p>Given the array <code class="language-plaintext highlighter-rouge">nums</code>, for each <code class="language-plaintext highlighter-rouge">nums[i]</code> find out how many numbers in the array are smaller than it. That is, for each <code class="language-plaintext highlighter-rouge">nums[i]</code> you have to count the number of valid <code class="language-plaintext highlighter-rouge">j's</code> such that <code class="language-plaintext highlighter-rouge">j != i</code> <strong>and</strong> <code class="language-plaintext highlighter-rouge">nums[j] &lt; nums[i]</code>.</p>

<p>Return the answer in an array.</p>

<p><strong>Example 1:</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Input: nums = [8,1,2,2,3]
Output: [4,0,1,1,3]
Explanation: 
For nums[0]=8 there exist four smaller numbers than it (1, 2, 2 and 3). 
For nums[1]=1 does not exist any smaller number than it.
For nums[2]=2 there exist one smaller number than it (1). 
For nums[3]=2 there exist one smaller number than it (1). 
For nums[4]=3 there exist three smaller numbers than it (1, 2 and 2).
</code></pre></div></div>

<p><strong>Example 2:</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Input: nums = [6,5,4,8]
Output: [2,1,0,3]
</code></pre></div></div>

<p><strong>Example 3:</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Input: nums = [7,7,7,7]
Output: [0,0,0,0]
</code></pre></div></div>

<p><strong>Constraints:</strong></p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">2 &lt;= nums.length &lt;= 500</code></li>
  <li><code class="language-plaintext highlighter-rouge">0 &lt;= nums[i] &lt;= 100</code></li>
</ul>

<h3 id="题目解析">题目解析</h3>

<p>首先，声明<code class="language-plaintext highlighter-rouge">vector&lt;pair&lt;int, int&gt;&gt;</code>类型的<code class="language-plaintext highlighter-rouge">vp</code>，其中第<code class="language-plaintext highlighter-rouge">i</code>个元素为<code class="language-plaintext highlighter-rouge">nums[i]</code>和<code class="language-plaintext highlighter-rouge">i</code>；其次，将<code class="language-plaintext highlighter-rouge">vp</code>从小到大进行排序；然后，遍历<code class="language-plaintext highlighter-rouge">vp</code>，如果<code class="language-plaintext highlighter-rouge">vp[i].first</code>与<code class="language-plaintext highlighter-rouge">vp[i-1].first</code>相等，则直接将<code class="language-plaintext highlighter-rouge">res</code>中的对应位置赋为相同的值，否则赋值为计数结果；最后，返回<code class="language-plaintext highlighter-rouge">res</code>即可。</p>

<h4 id="c-实现">C++ 实现</h4>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">smallerNumbersThanCurrent</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">nums</span><span class="p">)</span> <span class="p">{</span>
        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">nums</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">res</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="n">pair</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="o">&gt;&gt;</span> <span class="n">vp</span><span class="p">;</span>
        <span class="n">vp</span><span class="p">.</span><span class="n">push_back</span><span class="p">({</span><span class="n">INT_MIN</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">});</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span>
            <span class="n">vp</span><span class="p">.</span><span class="n">push_back</span><span class="p">({</span><span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">i</span><span class="p">});</span>
        <span class="n">sort</span><span class="p">(</span><span class="n">vp</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">vp</span><span class="p">.</span><span class="n">end</span><span class="p">());</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">n</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">vp</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">first</span> <span class="o">==</span> <span class="n">vp</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">].</span><span class="n">first</span><span class="p">)</span>
                <span class="n">res</span><span class="p">[</span><span class="n">vp</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">second</span><span class="p">]</span> <span class="o">=</span> <span class="n">res</span><span class="p">[</span><span class="n">vp</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">].</span><span class="n">second</span><span class="p">];</span>
            <span class="k">else</span>
                <span class="n">res</span><span class="p">[</span><span class="n">vp</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">second</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">res</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span>
</code></pre></div></div>

<h2 id="1366-rank-teams-by-votes-medium">1366. Rank Teams by Votes #Medium</h2>

<h3 id="题目描述-1">题目描述</h3>

<p>In a special ranking system, each voter gives a rank from highest to lowest to all teams participated in the competition.</p>

<p>The ordering of teams is decided by who received the most position-one votes. If two or more teams tie in the first position, we consider the second position to resolve the conflict, if they tie again, we continue this process until the ties are resolved. If two or more teams are still tied after considering all positions, we rank them alphabetically based on their team letter.</p>

<p>Given an array of strings <code class="language-plaintext highlighter-rouge">votes</code> which is the votes of all voters in the ranking systems. Sort all teams according to the ranking system described above.</p>

<p>Return <em>a string of all teams</em> <strong>sorted</strong> by the ranking system.</p>

<p><strong>Example 1:</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Input: votes = ["ABC","ACB","ABC","ACB","ACB"]
Output: "ACB"
Explanation: Team A was ranked first place by 5 voters. No other team was voted as first place so team A is the first team.
Team B was ranked second by 2 voters and was ranked third by 3 voters.
Team C was ranked second by 3 voters and was ranked third by 2 voters.
As most of the voters ranked C second, team C is the second team and team B is the third.
</code></pre></div></div>

<p><strong>Example 2:</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Input: votes = ["WXYZ","XYZW"]
Output: "XWYZ"
Explanation: X is the winner due to tie-breaking rule. X has same votes as W for the first position but X has one vote as second position while W doesn't have any votes as second position. 
</code></pre></div></div>

<p><strong>Example 3:</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Input: votes = ["ZMNAGUEDSJYLBOPHRQICWFXTVK"]
Output: "ZMNAGUEDSJYLBOPHRQICWFXTVK"
Explanation: Only one voter so his votes are used for the ranking.
</code></pre></div></div>

<p><strong>Example 4:</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Input: votes = ["BCA","CAB","CBA","ABC","ACB","BAC"]
Output: "ABC"
Explanation: 
Team A was ranked first by 2 voters, second by 2 voters and third by 2 voters.
Team B was ranked first by 2 voters, second by 2 voters and third by 2 voters.
Team C was ranked first by 2 voters, second by 2 voters and third by 2 voters.
There is a tie and we rank teams ascending by their IDs.
</code></pre></div></div>

<p><strong>Example 5:</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Input: votes = ["M","M","M","M"]
Output: "M"
Explanation: Only team M in the competition so it has the first rank.
</code></pre></div></div>

<p><strong>Constraints:</strong></p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">1 &lt;= votes.length &lt;= 1000</code></li>
  <li><code class="language-plaintext highlighter-rouge">1 &lt;= votes[i].length &lt;= 26</code></li>
  <li><code class="language-plaintext highlighter-rouge">votes[i].length == votes[j].length</code> for <code class="language-plaintext highlighter-rouge">0 &lt;= i, j &lt; votes.length</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">votes[i][j]</code> is an English <strong>upper-case</strong> letter.</li>
  <li>All characters of <code class="language-plaintext highlighter-rouge">votes[i]</code> are unique.</li>
  <li>All the characters that occur in <code class="language-plaintext highlighter-rouge">votes[0]</code> <strong>also occur</strong> in <code class="language-plaintext highlighter-rouge">votes[j]</code> where <code class="language-plaintext highlighter-rouge">1 &lt;= j &lt; votes.length</code>.</li>
</ul>

<h3 id="题目解析-1">题目解析</h3>

<p>首先，声明<code class="language-plaintext highlighter-rouge">vector&lt;pair&lt;string, char&gt;&gt;</code>类型的<code class="language-plaintext highlighter-rouge">vp</code>，其中<code class="language-plaintext highlighter-rouge">string</code>的长度为参赛者的数量<code class="language-plaintext highlighter-rouge">n</code>，<code class="language-plaintext highlighter-rouge">char</code>为<code class="language-plaintext highlighter-rouge">'A'</code>~<code class="language-plaintext highlighter-rouge">'Z'</code>之间的字符，所以<code class="language-plaintext highlighter-rouge">vp</code>用于存放每个字符的投票情况，由该字符在每个位次的票数来表示；其次，遍历<code class="language-plaintext highlighter-rouge">votes</code>中的<code class="language-plaintext highlighter-rouge">vote</code>，<code class="language-plaintext highlighter-rouge">vp</code>中该字符的对应位次的票数累加<code class="language-plaintext highlighter-rouge">1</code>；然后，将<code class="language-plaintext highlighter-rouge">vp</code>进行排序；最后，将排序后的字符添加至<code class="language-plaintext highlighter-rouge">s</code>中，返回<code class="language-plaintext highlighter-rouge">s</code>即可。</p>

<h4 id="c-实现-1">C++ 实现</h4>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="n">string</span> <span class="n">rankTeams</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;&amp;</span> <span class="n">votes</span><span class="p">)</span> <span class="p">{</span>
        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">votes</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">size</span><span class="p">();</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="n">pair</span><span class="o">&lt;</span><span class="n">string</span><span class="p">,</span> <span class="kt">char</span><span class="o">&gt;&gt;</span> <span class="n">vp</span><span class="p">;</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">char</span> <span class="n">c</span> <span class="o">=</span> <span class="sc">'A'</span><span class="p">;</span> <span class="n">c</span> <span class="o">&lt;=</span> <span class="sc">'Z'</span><span class="p">;</span> <span class="o">++</span><span class="n">c</span><span class="p">)</span>
            <span class="n">vp</span><span class="p">.</span><span class="n">push_back</span><span class="p">({</span><span class="n">string</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="sc">'0'</span><span class="p">),</span> <span class="n">c</span><span class="p">});</span>
        <span class="k">for</span> <span class="p">(</span><span class="k">auto</span> <span class="n">vote</span> <span class="o">:</span> <span class="n">votes</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">vp</span><span class="p">[</span><span class="n">vote</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">-</span><span class="sc">'A'</span><span class="p">].</span><span class="n">first</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="n">sort</span><span class="p">(</span><span class="n">vp</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">vp</span><span class="p">.</span><span class="n">end</span><span class="p">(),</span> <span class="p">[](</span><span class="k">auto</span> <span class="n">p1</span><span class="p">,</span> <span class="k">auto</span> <span class="n">p2</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="p">(</span><span class="n">p1</span><span class="p">.</span><span class="n">first</span> <span class="o">&gt;</span> <span class="n">p2</span><span class="p">.</span><span class="n">first</span><span class="p">)</span> <span class="o">||</span>
                <span class="p">(</span><span class="n">p1</span><span class="p">.</span><span class="n">first</span> <span class="o">==</span> <span class="n">p2</span><span class="p">.</span><span class="n">first</span> <span class="o">&amp;&amp;</span> <span class="n">p1</span><span class="p">.</span><span class="n">second</span> <span class="o">&lt;</span> <span class="n">p2</span><span class="p">.</span><span class="n">second</span><span class="p">);</span>
        <span class="p">});</span>
        <span class="n">string</span> <span class="n">s</span> <span class="o">=</span> <span class="s">""</span><span class="p">;</span>
        <span class="k">for</span> <span class="p">(</span><span class="k">auto</span> <span class="n">p</span> <span class="o">:</span> <span class="n">vp</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">p</span><span class="p">.</span><span class="n">first</span> <span class="o">!=</span> <span class="n">string</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="sc">'0'</span><span class="p">))</span>
                <span class="n">s</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">p</span><span class="p">.</span><span class="n">second</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">s</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span>
</code></pre></div></div>

<h2 id="1367-linked-list-in-binary-tree-medium">1367. Linked List in Binary Tree #Medium</h2>

<h3 id="题目描述-2">题目描述</h3>

<p>Given a binary tree <code class="language-plaintext highlighter-rouge">root</code> and a linked list with <code class="language-plaintext highlighter-rouge">head</code> as the first node.</p>

<p>Return True if all the elements in the linked list starting from the <code class="language-plaintext highlighter-rouge">head</code> correspond to some <em>downward path</em> connected in the binary tree otherwise return False.</p>

<p>In this context downward path means a path that starts at some node and goes downwards.</p>

<p><strong>Example 1:</strong></p>

<p><img src="https://assets.leetcode.com/uploads/2020/02/12/sample_1_1720.png" alt="img" /></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Input: head = [4,2,8], root = [1,4,4,null,2,2,null,1,null,6,8,null,null,null,null,1,3]
Output: true
Explanation: Nodes in blue form a subpath in the binary Tree.  
</code></pre></div></div>

<p><strong>Example 2:</strong></p>

<p><img src="https://assets.leetcode.com/uploads/2020/02/12/sample_2_1720.png" alt="img" /></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Input: head = [1,4,2,6], root = [1,4,4,null,2,2,null,1,null,6,8,null,null,null,null,1,3]
Output: true
</code></pre></div></div>

<p><strong>Example 3:</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Input: head = [1,4,2,6,8], root = [1,4,4,null,2,2,null,1,null,6,8,null,null,null,null,1,3]
Output: false
Explanation: There is no path in the binary tree that contains all the elements of the linked list from head.
</code></pre></div></div>

<p><strong>Constraints:</strong></p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">1 &lt;= node.val &lt;= 100</code> for each node in the linked list and binary tree.</li>
  <li>The given linked list will contain between <code class="language-plaintext highlighter-rouge">1</code> and <code class="language-plaintext highlighter-rouge">100</code> nodes.</li>
  <li>The given binary tree will contain between <code class="language-plaintext highlighter-rouge">1</code> and <code class="language-plaintext highlighter-rouge">2500</code> nodes.</li>
</ul>

<h3 id="题目解析-2">题目解析</h3>

<p>递归遍历树，并且递归与链表进行比对即可。</p>

<h4 id="c-实现-2">C++ 实现</h4>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/**
 * Definition for singly-linked list.
 * struct ListNode {
 *     int val;
 *     ListNode *next;
 *     ListNode(int x) : val(x), next(NULL) {}
 * };
 */</span>
<span class="cm">/**
 * Definition for a binary tree node.
 * struct TreeNode {
 *     int val;
 *     TreeNode *left;
 *     TreeNode *right;
 *     TreeNode(int x) : val(x), left(NULL), right(NULL) {}
 * };
 */</span>
<span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="kt">bool</span> <span class="n">isSubPath</span><span class="p">(</span><span class="n">ListNode</span><span class="o">*</span> <span class="n">head</span><span class="p">,</span> <span class="n">TreeNode</span><span class="o">*</span> <span class="n">root</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">root</span><span class="p">)</span> <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">helper</span><span class="p">(</span><span class="n">head</span><span class="p">,</span> <span class="n">root</span><span class="p">))</span> <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
        <span class="k">return</span> <span class="n">isSubPath</span><span class="p">(</span><span class="n">head</span><span class="p">,</span> <span class="n">root</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">)</span> <span class="o">||</span>
            <span class="n">isSubPath</span><span class="p">(</span><span class="n">head</span><span class="p">,</span> <span class="n">root</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="kt">bool</span> <span class="n">helper</span><span class="p">(</span><span class="n">ListNode</span> <span class="o">*</span><span class="n">lnode</span><span class="p">,</span> <span class="n">TreeNode</span> <span class="o">*</span><span class="n">tnode</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">lnode</span><span class="p">)</span> <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">tnode</span><span class="p">)</span> <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">lnode</span><span class="o">-&gt;</span><span class="n">val</span> <span class="o">!=</span> <span class="n">tnode</span><span class="o">-&gt;</span><span class="n">val</span><span class="p">)</span> <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
        <span class="k">return</span> <span class="n">helper</span><span class="p">(</span><span class="n">lnode</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">,</span> <span class="n">tnode</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">)</span> <span class="o">||</span>
            <span class="n">helper</span><span class="p">(</span><span class="n">lnode</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">,</span> <span class="n">tnode</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">};</span>
</code></pre></div></div>

<h2 id="1368-minimum-cost-to-make-at-least-one-valid-path-in-a-grid-hard">1368. Minimum Cost to Make at Least One Valid Path in a Grid #Hard</h2>

<h3 id="题目描述-3">题目描述</h3>

<p>Given a <em>m x n</em> <code class="language-plaintext highlighter-rouge">grid</code>. Each cell of the <code class="language-plaintext highlighter-rouge">grid</code> has a sign pointing to the next cell you should visit if you are currently in this cell. The sign of <code class="language-plaintext highlighter-rouge">grid[i][j]</code> can be:</p>

<ul>
  <li><strong>1</strong> which means go to the cell to the right. (i.e go from <code class="language-plaintext highlighter-rouge">grid[i][j]</code> to <code class="language-plaintext highlighter-rouge">grid[i][j + 1]</code>)</li>
  <li><strong>2</strong> which means go to the cell to the left. (i.e go from <code class="language-plaintext highlighter-rouge">grid[i][j]</code> to <code class="language-plaintext highlighter-rouge">grid[i][j - 1]</code>)</li>
  <li><strong>3</strong> which means go to the lower cell. (i.e go from <code class="language-plaintext highlighter-rouge">grid[i][j]</code> to <code class="language-plaintext highlighter-rouge">grid[i + 1][j]</code>)</li>
  <li><strong>4</strong> which means go to the upper cell. (i.e go from <code class="language-plaintext highlighter-rouge">grid[i][j]</code> to <code class="language-plaintext highlighter-rouge">grid[i - 1][j]</code>)</li>
</ul>

<p>Notice that there could be some <strong>invalid signs</strong> on the cells of the <code class="language-plaintext highlighter-rouge">grid</code> which points outside the <code class="language-plaintext highlighter-rouge">grid</code>.</p>

<p>You will initially start at the upper left cell <code class="language-plaintext highlighter-rouge">(0,0)</code>. A valid path in the grid is a path which starts from the upper left cell <code class="language-plaintext highlighter-rouge">(0,0)</code> and ends at the bottom-right cell <code class="language-plaintext highlighter-rouge">(m - 1, n - 1)</code> following the signs on the grid. The valid path <strong>doesn’t have to be the shortest</strong>.</p>

<p>You can modify the sign on a cell with <code class="language-plaintext highlighter-rouge">cost = 1</code>. You can modify the sign on a cell <strong>one time only</strong>.</p>

<p>Return <em>the minimum cost</em> to make the grid have at least one valid path.</p>

<p><strong>Example 1:</strong></p>

<p><img src="https://assets.leetcode.com/uploads/2020/02/13/grid1.png" alt="img" /></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Input: grid = [[1,1,1,1],[2,2,2,2],[1,1,1,1],[2,2,2,2]]
Output: 3
Explanation: You will start at point (0, 0).
The path to (3, 3) is as follows. (0, 0) --&gt; (0, 1) --&gt; (0, 2) --&gt; (0, 3) change the arrow to down with cost = 1 --&gt; (1, 3) --&gt; (1, 2) --&gt; (1, 1) --&gt; (1, 0) change the arrow to down with cost = 1 --&gt; (2, 0) --&gt; (2, 1) --&gt; (2, 2) --&gt; (2, 3) change the arrow to down with cost = 1 --&gt; (3, 3)
The total cost = 3.
</code></pre></div></div>

<p><strong>Example 2:</strong></p>

<p><img src="https://assets.leetcode.com/uploads/2020/02/13/grid2.png" alt="img" /></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Input: grid = [[1,1,3],[3,2,2],[1,1,4]]
Output: 0
Explanation: You can follow the path from (0, 0) to (2, 2).
</code></pre></div></div>

<p><strong>Example 3:</strong></p>

<p><img src="https://assets.leetcode.com/uploads/2020/02/13/grid3.png" alt="img" /></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Input: grid = [[1,2],[4,3]]
Output: 1
</code></pre></div></div>

<p><strong>Example 4:</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Input: grid = [[2,2,2],[2,2,2]]
Output: 3
</code></pre></div></div>

<p><strong>Example 5:</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Input: grid = [[4]]
Output: 0
</code></pre></div></div>

<p><strong>Constraints:</strong></p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">m == grid.length</code></li>
  <li><code class="language-plaintext highlighter-rouge">n == grid[i].length</code></li>
  <li><code class="language-plaintext highlighter-rouge">1 &lt;= m, n &lt;= 100</code></li>
</ul>

<h3 id="题目解析-3">题目解析</h3>

<p>首先，声明<code class="language-plaintext highlighter-rouge">deque&lt;pair&lt;int, int&gt;&gt;</code>类型的<code class="language-plaintext highlighter-rouge">dq</code>，其中每个元素的<code class="language-plaintext highlighter-rouge">first</code>成员为该方格的序号（使用坐标计算可得），<code class="language-plaintext highlighter-rouge">second</code>成员为从<code class="language-plaintext highlighter-rouge">(0, 0)</code>位置移动到该方格需要的花费，声明<code class="language-plaintext highlighter-rouge">visited</code>，用于存放已访问方格的序号；其次，循环取出<code class="language-plaintext highlighter-rouge">dp</code>的队首元素<code class="language-plaintext highlighter-rouge">p</code>，其始终为当前花费最少的方格，如果刚好到达<code class="language-plaintext highlighter-rouge">(m-1, n-1)</code>位置，则返回当前方格的花费即可；最后，将周围方格加入到<code class="language-plaintext highlighter-rouge">dq</code>中，如果周围方格刚好是当前方格的移动方向，则花费不变，否则花费累加<code class="language-plaintext highlighter-rouge">1</code>。</p>

<h4 id="c-实现-3">C++ 实现</h4>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="kt">int</span> <span class="n">minCost</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;&amp;</span> <span class="n">grid</span><span class="p">)</span> <span class="p">{</span>
        <span class="kt">int</span> <span class="n">m</span> <span class="o">=</span> <span class="n">grid</span><span class="p">.</span><span class="n">size</span><span class="p">(),</span> <span class="n">n</span> <span class="o">=</span> <span class="n">grid</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">size</span><span class="p">();</span>
        <span class="kt">int</span> <span class="n">dirs</span><span class="p">[</span><span class="mi">5</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="p">{{</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">},</span> <span class="p">{</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">},</span> <span class="p">{</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">}};</span>
        <span class="n">deque</span><span class="o">&lt;</span><span class="n">pair</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="o">&gt;&gt;</span> <span class="n">dq</span> <span class="o">=</span> <span class="p">{{</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">}};</span>
        <span class="n">unordered_set</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">visited</span><span class="p">;</span>
        <span class="k">while</span> <span class="p">(</span><span class="o">!</span><span class="n">dq</span><span class="p">.</span><span class="n">empty</span><span class="p">())</span> <span class="p">{</span>
            <span class="k">auto</span> <span class="n">p</span> <span class="o">=</span> <span class="n">dq</span><span class="p">.</span><span class="n">front</span><span class="p">();</span> <span class="n">dq</span><span class="p">.</span><span class="n">pop_front</span><span class="p">();</span>
            <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">p</span><span class="p">.</span><span class="n">first</span> <span class="o">/</span> <span class="n">n</span><span class="p">,</span> <span class="n">j</span> <span class="o">=</span> <span class="n">p</span><span class="p">.</span><span class="n">first</span> <span class="o">%</span> <span class="n">n</span><span class="p">;</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">visited</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="n">p</span><span class="p">.</span><span class="n">first</span><span class="p">).</span><span class="n">second</span> <span class="o">&amp;&amp;</span>
                <span class="n">i</span> <span class="o">==</span> <span class="n">m</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="n">j</span> <span class="o">==</span> <span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="k">return</span> <span class="n">p</span><span class="p">.</span><span class="n">second</span><span class="p">;</span>
            <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">idx</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">idx</span> <span class="o">&lt;=</span> <span class="mi">4</span><span class="p">;</span> <span class="o">++</span><span class="n">idx</span><span class="p">)</span> <span class="p">{</span>
                <span class="kt">int</span> <span class="n">x</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="n">dirs</span><span class="p">[</span><span class="n">idx</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">y</span> <span class="o">=</span> <span class="n">j</span> <span class="o">+</span> <span class="n">dirs</span><span class="p">[</span><span class="n">idx</span><span class="p">][</span><span class="mi">1</span><span class="p">];</span>
                <span class="kt">int</span> <span class="n">pos</span> <span class="o">=</span> <span class="n">x</span> <span class="o">*</span> <span class="n">n</span> <span class="o">+</span> <span class="n">y</span><span class="p">;</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">x</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">x</span> <span class="o">&gt;=</span> <span class="n">m</span> <span class="o">||</span> <span class="n">y</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">y</span> <span class="o">&gt;=</span> <span class="n">n</span> <span class="o">||</span>
                    <span class="n">visited</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span> <span class="o">!=</span> <span class="n">visited</span><span class="p">.</span><span class="n">end</span><span class="p">())</span> <span class="k">continue</span><span class="p">;</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">grid</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">==</span> <span class="n">idx</span><span class="p">)</span>
                    <span class="n">dq</span><span class="p">.</span><span class="n">push_front</span><span class="p">({</span><span class="n">pos</span><span class="p">,</span> <span class="n">p</span><span class="p">.</span><span class="n">second</span><span class="p">});</span>
                <span class="k">else</span>
                    <span class="n">dq</span><span class="p">.</span><span class="n">push_back</span><span class="p">({</span><span class="n">pos</span><span class="p">,</span> <span class="n">p</span><span class="p">.</span><span class="n">second</span><span class="o">+</span><span class="mi">1</span><span class="p">});</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span>
</code></pre></div></div>